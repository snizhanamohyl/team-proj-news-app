{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BCAA,SAASC,EAAuBC,GAgC9B,OA/BeA,EACZC,KAAI,SAAAC,G,IAAGC,EAAGD,EAAHC,IAAKC,EAAQF,EAARE,SAAUC,EAAKH,EAALG,MAAOC,EAAYJ,EAAZI,aAAcC,EAAUL,EAAVK,WAAYC,EAAON,EAAPM,QAClDC,EAAQF,EAAW,GAAGJ,IAE1B,MAAO,2HAK4BO,OAFMD,EAAM,4FAUdC,OAREF,EAAQ,wXASZE,OADEL,EAAM,8CAIrCK,OAH6BN,EAAS,wGAIiBM,OADvDJ,EAAaK,MAAM,IAAIC,OAAO,EAAG,IAAIC,KAAK,IAAIC,WAAW,IAAK,KAAK,uEACRJ,OAAJP,EAAI,oG,IAQ9DU,KAAK,G,CD5BV,IAAME,EAAYC,SAASC,eAAe,UACpCC,EAAWF,SAASC,eAAe,YACnCE,EAAaH,SAASC,eAAe,eACrCG,EAAUJ,SAASC,eAAe,mBAClCI,EAAOL,SAASM,uBAAuB,mBACvCC,EAAiBP,SAASC,eAAe,oBACzCO,EAAMR,SAASC,eAAe,qBAC9BQ,EAAiBT,SAASC,eAAe,iBACzCS,EAAUV,SAASW,cAAc,aAEjCC,EAAM,IAAI,EAAAC,EAAAC,SAMhB,SAASC,IACPb,EAASc,UAAUC,OAAO,gBAC1BlB,EAAUiB,UAAUC,OAAO,Y,CA4C7B,SAASC,EAAmBC,GAC1B,MAAO,mDAA4DzB,OAATyB,EAAS,iB,CAGrE,SAASC,EAAgBC,GACvBlB,EAAWmB,mBAAmB,YAAaD,E,UA8B9BE,I,OAAAC,EAAUC,MAAAC,KAAAC,U,UAAVH,I,OAAAA,EAAfI,EAAA/C,EAAA,CAAA+C,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUC,EAMAX,E,yEARRZ,EAAewB,MAAMC,QAAU,O,kBAEAtB,EAAIuB,e,UAEG,QAF9BH,EAAcI,EAAAC,MAEDC,KAAKC,QAAgB,C,eACtC,MAAM,IAAIC,MAAM,c,OAGZnB,EAAStC,EAAuBiD,EAAeM,KAAKC,SAE1D7B,EAAQ+B,UAAY,GACpB/B,EAAQ+B,UAAYpB,E,kDAEpBqB,QAAQC,IAAI,QAAOP,EAAAQ,IACnBlC,EAAQ+B,UAAY,GACpBhC,EAAewB,MAAMC,QAAU,Q,2DAhBVT,MAAAC,KAAAC,U,CAnFzB5B,EAAU8C,iBAAiB,QAAS9B,GASpC+B,OAAOD,iBAAiB,oBAExB,WACEjC,EACGmC,eACAC,MAAK,SAAAC,GACJ,OAAOA,EAASX,KAAKC,O,IAEtBS,MAAK,SAAAE,GACAJ,OAAOK,WAAa,MACtB/C,EAAQgD,YAAc,aAS9B,SAA6BF,GAC3B,IAAK,IAAIG,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAE9BjC,EAAgBF,EADCgC,EAAWG,GAAGC,c,EAV3BC,CAAoBL,IAe5B,SAAuBA,GACrB,IAAK,IAAIG,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1BhD,EAAKgD,GAAGD,YAAcF,EAAWG,GAAGC,Y,CAdlCE,CAAcN,GAkBpB,SAA+BA,GAC7B,IAAK,IAAIG,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAE9BjC,EAAgBF,EADCgC,EAAWG,EAAI,GAAGC,c,EAnBjCG,CAAsBP,E,OAkC5B3C,EAAesC,iBAAiB,SAchC,SAA6Ba,GAC3B,IAAMC,EAASD,EAAME,OAIrB,GAFAhD,EAAIO,SAAWwC,EAAOP,YAAYS,cAEb,WAAjBjD,EAAIO,UAAyBwC,IAAW5D,GAAa4D,IAAWnD,EAClE,OAEFe,G,IArBFpB,EAAW0C,iBAAiB,SAE5B,SAA6Ba,GAC3B3C,IAEA,IAAM4C,EAASD,EAAME,OACfE,EAAaC,mBAAmBJ,EAAOP,YAAYS,eAEzDjD,EAAIO,SAAW2C,EAEfvC,G","sources":["src/js/categories.js","src/js/markup-categories-function.js"],"sourcesContent":["import SearchNews from './api';\nimport { createCategoriesMarkup } from './markup-categories-function';\n\nconst othersBtn = document.getElementById('others');\nconst dropdown = document.getElementById('dropdown');\nconst othersList = document.getElementById('others-list');\nconst btnSpan = document.getElementById('categories-span');\nconst btns = document.getElementsByClassName('categories__btn');\nconst categoriesList = document.getElementById('categories__list');\nconst svg = document.getElementById('categories__arrow');\nconst imageNoResults = document.getElementById('img-noresults');\nconst gallery = document.querySelector('.card-set');\n\nconst api = new SearchNews();\n\n// Categories drop-down list\n\nothersBtn.addEventListener('click', openDropdown);\n\nfunction openDropdown() {\n  dropdown.classList.toggle('js-is-hidden');\n  othersBtn.classList.toggle('is-active');\n}\n\n// Categories list load from server\n\nwindow.addEventListener('DOMContentLoaded', onPageLoad);\n\nfunction onPageLoad() {\n  api\n    .categoryList()\n    .then(response => {\n      return response.data.results;\n    })\n    .then(categories => {\n      if (window.innerWidth < 768) {\n        btnSpan.textContent = 'Categories';\n        renderMobCategories(categories);\n      }\n\n      renderButtons(categories);\n      renderOtherCategories(categories);\n    });\n}\n\nfunction renderMobCategories(categories) {\n  for (let i = 0; i < 50; i += 1) {\n    const category = categories[i].display_name;\n    addOthersMarkup(createOthersMarkup(category));\n  }\n}\n\nfunction renderButtons(categories) {\n  for (let i = 0; i < 6; i += 1) {\n    btns[i].textContent = categories[i].display_name;\n  }\n}\n\nfunction renderOtherCategories(categories) {\n  for (let i = 0; i < 44; i += 1) {\n    const category = categories[i + 6].display_name;\n    addOthersMarkup(createOthersMarkup(category));\n  }\n}\n\nfunction createOthersMarkup(category) {\n  return `<li><button class=\"dropdown-item\" type=\"button\">${category}</button></li>`;\n}\n\nfunction addOthersMarkup(markup) {\n  othersList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Fetch news by category\n\ncategoriesList.addEventListener('click', onCategoryListClick);\nothersList.addEventListener('click', onDropDownListClick);\n\nfunction onDropDownListClick(event) {\n  openDropdown();\n\n  const button = event.target;\n  const encodedBtn = encodeURIComponent(button.textContent.toLowerCase());\n\n  api.category = encodedBtn;\n\n  renderNews();\n}\n\nfunction onCategoryListClick(event) {\n  const button = event.target;\n\n  api.category = button.textContent.toLowerCase();\n\n  if (api.category === 'others' || button === othersBtn || button === svg) {\n    return;\n  }\n  renderNews();\n}\n\nasync function renderNews() {\n  imageNoResults.style.display = 'none';\n  try {\n    const categorySearch = await api.categoryNews();\n\n    if (categorySearch.data.results === null) {\n      throw new Error('no results');\n    }\n\n    const markup = createCategoriesMarkup(categorySearch.data.results);\n\n    gallery.innerHTML = '';\n    gallery.innerHTML = markup;\n  } catch (error) {\n    console.log('ERROR', error);\n    gallery.innerHTML = '';\n    imageNoResults.style.display = 'block';\n  }\n}\n","function createCategoriesMarkup(articles) {\n  const markup = articles\n    .map(({ url, abstract, title, updated_date, multimedia, section }) => {\n      let image = multimedia[2].url;\n\n      return `<li class=\"news-card\">\n        <article>\n         <div class=\"box-img\">\n        <div class=\"news-card__img\"><img src=${image} alt=\"img-news\" height = \"395\">\n        </div>\n            <p class=\"box-img__inform\">${section}</p>\n            <button type=\"button\" class=\"favorite-btn\">\n                Add to favorite\n                <svg class=\"favorite-btn__icon\" width=\"16\" height=\"16\">\n                    <use class=\"icon-js\" href=\"./images/sprite.svg#icon-icons-heart-no-active\"></use>\n                </svg>\n            </button>\n        </div>\n        <h2 class=\"news-card__title\">${title}</h2>\n        <p class=\"news-card__text\">${abstract}</p>\n        <div class=\"news-card__inform\">\n            <p class=\"news-card__date\">\n\t\t\t\t\t\t${updated_date.split('').splice(0, 10).join('').replaceAll('-', '/')}</p>\n            <a class=\"news-card__link\" target=\"_blank\" href=\"${url}\">\n                Read more\n            </a>\n        </div>\n      </article>\n    </li>   \n`;\n    })\n    .join('');\n  return markup;\n}\n\nexport { createCategoriesMarkup };\n"],"names":["$bpxeT","parcelRequire","$3499ee5564fbab0c$export$a78387c44a3cb6f9","articles","map","param","url","abstract","title","updated_date","multimedia","section","image","concat","split","splice","join","replaceAll","$7035cf87bda54340$var$othersBtn","document","getElementById","$7035cf87bda54340$var$dropdown","$7035cf87bda54340$var$othersList","$7035cf87bda54340$var$btnSpan","$7035cf87bda54340$var$btns","getElementsByClassName","$7035cf87bda54340$var$categoriesList","$7035cf87bda54340$var$svg","$7035cf87bda54340$var$imageNoResults","$7035cf87bda54340$var$gallery","querySelector","$7035cf87bda54340$var$api","$b7ONl","default","$7035cf87bda54340$var$openDropdown","classList","toggle","$7035cf87bda54340$var$createOthersMarkup","category","$7035cf87bda54340$var$addOthersMarkup","markup","insertAdjacentHTML","$7035cf87bda54340$var$renderNews","$7035cf87bda54340$var$_renderNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","categorySearch","style","display","categoryNews","_ctx","sent","data","results","Error","innerHTML","console","log","t0","addEventListener","window","categoryList","then","response","categories","innerWidth","textContent","i","display_name","$7035cf87bda54340$var$renderMobCategories","$7035cf87bda54340$var$renderButtons","$7035cf87bda54340$var$renderOtherCategories","event","button","target","toLowerCase","encodedBtn","encodeURIComponent"],"version":3,"file":"index.74470a89.js.map"}