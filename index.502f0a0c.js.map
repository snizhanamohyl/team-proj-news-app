{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAYC,SAASC,eAAe,UACpCC,EAAWF,SAASC,eAAe,YACnCE,EAAaH,SAASC,eAAe,eACrCG,EAAUJ,SAASC,eAAe,mBAClCI,EAAOL,SAASM,uBAAuB,mBACvCC,EAAiBP,SAASC,eAAe,oBACzCO,EAAMR,SAASC,eAAe,qBAC9BQ,EAAiBT,SAASC,eAAe,iBACzCS,EAAUV,SAASC,eAAe,aAClCU,EAAiBX,SAASM,uBAAuB,mBAEjDM,EAAM,IAAI,EAAAf,EAAAgB,SAMhB,SAASC,IACPZ,EAASa,UAAUC,OAAO,gBAC1BjB,EAAUgB,UAAUC,OAAO,Y,CA4C7B,SAASC,EAAmBC,GAC1B,MAAO,mDAAmDA,iB,CAG5D,SAASC,EAAgBC,GACvBjB,EAAWkB,mBAAmB,YAAaD,E,CAyC7CE,eAAeC,IACbd,EAAee,MAAMC,QAAU,OAC/B,IACE,IAAIC,EAGJ,GAFAA,QAAuBd,EAAIe,eAES,OAAhCD,EAAeE,KAAKC,QACtB,MAAM,IAAIC,MAAM,cAGlB,MAAMV,GAAS,EAAAW,EAAAC,wBAAuBN,EAAeE,KAAKC,SAE1DnB,EAAQuB,UAAY,GACpBvB,EAAQuB,UAAYb,EACpBc,UAAUC,YAAYC,mBACpBC,EAAAC,oBACAD,EAAAE,iB,CAEF,MAAOC,GACPC,QAAQC,IAAI,QAASF,GACrB9B,EAAQuB,UAAY,GACpBxB,EAAee,MAAMC,QAAU,O,EAnHnC1B,EAAU4C,iBAAiB,QAAS7B,GASpC8B,OAAOD,iBAAiB,oBAExB,WACE/B,EACGiC,eACAC,MAAKC,GACGA,EAASnB,KAAKC,UAEtBiB,MAAKE,IACAJ,OAAOK,WAAa,MACtB7C,EAAQ8C,YAAc,aAS9B,SAA6BF,GAC3B,IAAK,IAAIG,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAE9BhC,EAAgBF,EADC+B,EAAWG,GAAGC,c,EAV3BC,CAAoBL,IAe5B,SAAuBA,GACrB,IAAK,IAAIG,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1B9C,EAAK8C,GAAGD,YAAcF,EAAWG,GAAGC,Y,CAdlCE,CAAcN,GAkBpB,SAA+BA,GAC7B,IAAK,IAAIG,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAE9BhC,EAAgBF,EADC+B,EAAWG,EAAI,GAAGC,c,EAnBjCG,CAAsBP,EAAW,G,IAkCvCzC,EAAeoC,iBAAiB,SAchC,SAA6Ba,GAC3B,MAAMC,EAASD,EAAME,OACrB9C,EAAIM,SAAWuC,EAAOP,YAAYS,cAKlC,GAH0BC,MAAMC,KAAKlD,GACnBmD,KAAIC,GAASA,EAAMhD,UAAUiD,OAAO,aAGnC,WAAjBpD,EAAIM,UACJuC,IAAW1D,GACX0D,IAAWjD,GACM,eAAjBI,EAAIM,UACa,KAAjBN,EAAIM,SAEJ,OAGFuC,EAAO1C,UAAUkD,IAAI,WAErB1C,G,IAhCFpB,EAAWwC,iBAAiB,SAE5B,SAA6Ba,GAC3B1C,IAEA,MAAM2C,EAASD,EAAME,OACfQ,EAAaC,mBAAmBV,EAAOP,YAAYS,eAEzD/C,EAAIM,SAAWgD,EAEf3C,G","sources":["src/js/categories.js"],"sourcesContent":["import SearchNews from './api';\nimport { createCategoriesMarkup } from './markup-function';\nimport { renderWeatherAppGeo, renderWeatherApp } from './weather';\n\nconst othersBtn = document.getElementById('others');\nconst dropdown = document.getElementById('dropdown');\nconst othersList = document.getElementById('others-list');\nconst btnSpan = document.getElementById('categories-span');\nconst btns = document.getElementsByClassName('categories__btn');\nconst categoriesList = document.getElementById('categories__list');\nconst svg = document.getElementById('categories__arrow');\nconst imageNoResults = document.getElementById('img-noresults');\nconst gallery = document.getElementById('news-list');\nconst categoriesBtns = document.getElementsByClassName('categories__btn');\n\nconst api = new SearchNews();\n\n// Categories drop-down list\n\nothersBtn.addEventListener('click', openDropdown);\n\nfunction openDropdown() {\n  dropdown.classList.toggle('js-is-hidden');\n  othersBtn.classList.toggle('is-active');\n}\n\n// Categories list load from server\n\nwindow.addEventListener('DOMContentLoaded', onPageLoad);\n\nfunction onPageLoad() {\n  api\n    .categoryList()\n    .then(response => {\n      return response.data.results;\n    })\n    .then(categories => {\n      if (window.innerWidth < 768) {\n        btnSpan.textContent = 'Categories';\n        renderMobCategories(categories);\n      }\n\n      renderButtons(categories);\n      renderOtherCategories(categories);\n    });\n}\n\nfunction renderMobCategories(categories) {\n  for (let i = 0; i < 50; i += 1) {\n    const category = categories[i].display_name;\n    addOthersMarkup(createOthersMarkup(category));\n  }\n}\n\nfunction renderButtons(categories) {\n  for (let i = 0; i < 6; i += 1) {\n    btns[i].textContent = categories[i].display_name;\n  }\n}\n\nfunction renderOtherCategories(categories) {\n  for (let i = 0; i < 44; i += 1) {\n    const category = categories[i + 6].display_name;\n    addOthersMarkup(createOthersMarkup(category));\n  }\n}\n\nfunction createOthersMarkup(category) {\n  return `<li><button class=\"dropdown-item\" type=\"button\">${category}</button></li>`;\n}\n\nfunction addOthersMarkup(markup) {\n  othersList.insertAdjacentHTML('beforeend', markup);\n}\n\n// Fetch news by category\n\ncategoriesList.addEventListener('click', onCategoryListClick);\nothersList.addEventListener('click', onDropDownListClick);\n\nfunction onDropDownListClick(event) {\n  openDropdown();\n\n  const button = event.target;\n  const encodedBtn = encodeURIComponent(button.textContent.toLowerCase());\n\n  api.category = encodedBtn;\n\n  renderNews();\n}\n\nfunction onCategoryListClick(event) {\n  const button = event.target;\n  api.category = button.textContent.toLowerCase();\n\n  const categoriesBtnsArr = Array.from(categoriesBtns);\n  categoriesBtnsArr.map(child => child.classList.remove('pressed'));\n\n  if (\n    api.category === 'others' ||\n    button === othersBtn ||\n    button === svg ||\n    api.category === 'categories' ||\n    api.category === ''\n  ) {\n    return;\n  }\n\n  button.classList.add('pressed');\n\n  renderNews();\n}\n\nasync function renderNews() {\n  imageNoResults.style.display = 'none';\n  try {\n    let categorySearch;\n    categorySearch = await api.categoryNews();\n\n    if (categorySearch.data.results === null) {\n      throw new Error('no results');\n    }\n\n    const markup = createCategoriesMarkup(categorySearch.data.results);\n\n    gallery.innerHTML = '';\n    gallery.innerHTML = markup;\n    navigator.geolocation.getCurrentPosition(\n      renderWeatherAppGeo,\n      renderWeatherApp\n    );\n  } catch (error) {\n    console.log('ERROR', error);\n    gallery.innerHTML = '';\n    imageNoResults.style.display = 'block';\n  }\n}\n"],"names":["$7rYDH","parcelRequire","$f3b06000f9b46fbb$var$othersBtn","document","getElementById","$f3b06000f9b46fbb$var$dropdown","$f3b06000f9b46fbb$var$othersList","$f3b06000f9b46fbb$var$btnSpan","$f3b06000f9b46fbb$var$btns","getElementsByClassName","$f3b06000f9b46fbb$var$categoriesList","$f3b06000f9b46fbb$var$svg","$f3b06000f9b46fbb$var$imageNoResults","$f3b06000f9b46fbb$var$gallery","$f3b06000f9b46fbb$var$categoriesBtns","$f3b06000f9b46fbb$var$api","default","$f3b06000f9b46fbb$var$openDropdown","classList","toggle","$f3b06000f9b46fbb$var$createOthersMarkup","category","$f3b06000f9b46fbb$var$addOthersMarkup","markup","insertAdjacentHTML","async","$f3b06000f9b46fbb$var$renderNews","style","display","categorySearch","categoryNews","data","results","Error","$bZeYP","createCategoriesMarkup","innerHTML","navigator","geolocation","getCurrentPosition","$bkgkh","renderWeatherAppGeo","renderWeatherApp","error","console","log","addEventListener","window","categoryList","then","response","categories","innerWidth","textContent","i","display_name","$f3b06000f9b46fbb$var$renderMobCategories","$f3b06000f9b46fbb$var$renderButtons","$f3b06000f9b46fbb$var$renderOtherCategories","event","button","target","toLowerCase","Array","from","map","child","remove","add","encodedBtn","encodeURIComponent"],"version":3,"file":"index.502f0a0c.js.map"}