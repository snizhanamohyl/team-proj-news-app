{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAAMC,EAAeC,SAASC,cAAc,aAExCF,GACFA,EAAaG,iBAAiB,SAGhC,SAAsBC,GACpB,GAA8B,MAA1BA,EAAMC,OAAOC,SAAkB,CACjC,IAAMC,EAASH,EAAMC,OAAOG,QAAQ,WAE9BC,EAAW,CACfC,IAAKH,EAAOI,WAAW,GAAGC,SAAS,GAAGA,SAAS,GAAGC,IAClDC,IAAKV,EAAMC,OAAOU,aAAa,oBAC/BC,MAAOT,EAAOI,WAAW,GAAGM,YAC5BC,MAAOX,EAAOI,WAAW,GAAGM,YAC5BE,KAAMZ,EAAOI,WAAW,GAAGC,SAAS,GAAGQ,UACvCC,KAAMjB,EAAMC,OAAOiB,KACnBC,SAAUhB,EAAOI,WAAW,GAAGC,SAAS,GAAGK,aAGvCO,EA6BYC,KAAKC,MAAMC,aAAaC,QAAQ,mBACjB,GA7B3BC,GAqCFC,EAAe,IAAIC,KACnBC,EAAU,CAAEC,KAAM,UAAWC,MAAO,UAAWC,IAAK,WACnDL,EAAaM,mBAAmB,GAAIJ,GAASK,WAAW,IAAK,MArC5DC,EAAsBC,EAAAzC,EAAA,CAAG0C,OAAOC,KAAKjB,IAK3C,GAJ8Be,EAAAzC,EAAA,CAAG0C,OAAOE,OAAOlB,IAEHmB,SAAQ,SAAAC,G,OAAOA,C,IAExCC,MAAK,SAAAC,G,OAAOA,EAAIhC,MAAQL,EAASK,G,IAClD,OAGgC,IAA9BwB,EAAmBS,OACrBvB,EAAeK,GAAW,CAACpB,GAE3B6B,EAAmBU,KAAI,SAAAC,GACjBA,IAAOpB,EACTL,EAAeyB,GAAIC,KAAKzC,GAExBe,EAAeK,GAAW,CAACpB,E,IAcZ0C,EATL3B,EAUlBG,aAAayB,QAAQ,gBAAiB3B,KAAK4B,UAAUF,G,CADvD,IAAyBA,EAIzB,IACQrB,EACAE,C","sources":["src/js/read-LS.js"],"sourcesContent":["const cardsGallery = document.querySelector('.card-set');\n\nif (cardsGallery) {\n  cardsGallery.addEventListener('click', linkReadMore);\n}\n\nfunction linkReadMore(event) {\n  if (event.target.nodeName === 'A') {\n    const cardEl = event.target.closest('article');\n\n    const cardData = {\n      img: cardEl.childNodes[1].children[0].children[0].src,\n      uri: event.target.getAttribute('data-article-uri'),\n      title: cardEl.childNodes[3].textContent,\n      descr: cardEl.childNodes[5].textContent,\n      date: cardEl.childNodes[7].children[0].innerText,\n      link: event.target.href,\n      category: cardEl.childNodes[1].children[1].textContent,\n    };\n\n    const curStorageData = isLocalEmpty();\n    const curDate = generateDate();\n\n    const curStorageDataKeys = [...Object.keys(curStorageData)];\n    const curStorageDataValues = [...Object.values(curStorageData)];\n\n    const curStorageObjs = curStorageDataValues.flatMap(arr => arr);\n\n    if (curStorageObjs.find(obj => obj.uri === cardData.uri)) {\n      return;\n    }\n\n    if (curStorageDataKeys.length === 0) {\n      curStorageData[curDate] = [cardData];\n    } else {\n      curStorageDataKeys.map(el => {\n        if (el === curDate) {\n          curStorageData[el].push(cardData);\n        } else {\n          curStorageData[curDate] = [cardData];\n        }\n      });\n    }\n\n    addReadCardToLS(curStorageData);\n  }\n}\n\nfunction isLocalEmpty() {\n  const storedValue = JSON.parse(localStorage.getItem('read-articles'));\n  return storedValue ? storedValue : {};\n}\n\nfunction addReadCardToLS(localStorageData) {\n  localStorage.setItem('read-articles', JSON.stringify(localStorageData));\n}\n\nfunction generateDate() {\n  const eventDateNow = new Date();\n  const options = { year: 'numeric', month: 'numeric', day: 'numeric' };\n  return eventDateNow.toLocaleDateString([], options).replaceAll('.', '/');\n}\n"],"names":["$8nrFW","parcelRequire","$73c210d440bb13ad$var$cardsGallery","document","querySelector","addEventListener","event","target","nodeName","cardEl","closest","cardData","img","childNodes","children","src","uri","getAttribute","title","textContent","descr","date","innerText","link","href","category","curStorageData","JSON","parse","localStorage","getItem","curDate","eventDateNow","Date","options","year","month","day","toLocaleDateString","replaceAll","curStorageDataKeys","$parcel$interopDefault","Object","keys","values","flatMap","arr","find","obj","length","map","el","push","localStorageData","setItem","stringify"],"version":3,"file":"index.d939fd62.js.map"}